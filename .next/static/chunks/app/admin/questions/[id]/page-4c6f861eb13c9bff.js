(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[797],{4828:function(e,t,n){Promise.resolve().then(n.bind(n,9891))},9891:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var s=n(7437),i=n(2265),l=n(9376),r=n(9005),a=n(4614),o=n(9307),c=n(1403);function d(){return(0,s.jsx)(i.Suspense,{fallback:(0,s.jsx)(r.lq,{title:"Nač\xedt\xe1m...",subtitle:"",children:(0,s.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,s.jsx)("div",{className:"w-8 h-8 border-4 border-[#7A9E8E] border-t-transparent rounded-full animate-spin"})})}),children:(0,s.jsx)(x,{})})}function x(){let e=(0,l.useParams)(),t=(0,l.useRouter)(),n=(0,l.useSearchParams)(),d=e.id,x=n.get("topic"),[u,p]=(0,i.useState)(null),[h,m]=(0,i.useState)(!1),[b,f]=(0,i.useState)(null);(0,i.useEffect)(()=>{if("new"===d)p({id:"",topic_id:x||"",lesson_id:"",question:"",options:["","","",""],correct_index:0,explanation:"",difficulty:1,is_published:!1});else{let e=null,n="";for(let[t,s]of Object.entries(o.Sz)){let i=s.find(e=>e.id===d);if(i){e=i,n=t;break}}e?p({id:e.id,topic_id:n,lesson_id:"",question:e.question,options:e.options,correct_index:e.correct_index,explanation:e.explanation,difficulty:1,is_published:!0}):t.push("/admin/questions")}},[d,x,t]);let g=(e,t)=>{if(!u)return;let n=[...u.options];n[e]=t,p({...u,options:n})},v=e=>{if(!u||u.options.length<=2)return;let t=u.options.filter((t,n)=>n!==e),n=u.correct_index>=e?Math.max(0,u.correct_index-1):u.correct_index;p({...u,options:t,correct_index:n})};if(!u)return(0,s.jsx)(r.lq,{title:"Nač\xedt\xe1n\xed...",children:(0,s.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,s.jsx)("div",{className:"animate-spin w-8 h-8 border-4 border-[#7A9E8E] border-t-transparent rounded-full"})})});let j=a.Nl.find(e=>e.id===u.topic_id),y=u.topic_id&&c.Lh[u.topic_id]||[];return(0,s.jsx)(r.lq,{title:"new"===d?"Nov\xe1 ot\xe1zka":"Upravit ot\xe1zku",subtitle:j?"Kurz: ".concat(j.title):"Quiz ot\xe1zka",actions:(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(r.zx,{variant:"secondary",onClick:()=>t.push("/admin/questions"),children:"Zrušit"}),(0,s.jsx)(r.zx,{variant:"secondary",onClick:()=>{m(!h),f(null)},children:h?"Editor":"N\xe1hled"}),(0,s.jsx)(r.zx,{onClick:()=>alert("V produkci by se uložilo do Supabase"),children:"Uložit"})]}),children:(0,s.jsxs)("div",{className:"grid lg:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)(r.Zb,{title:"Ot\xe1zka",children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(r.Ph,{label:"Kurz",value:u.topic_id,onChange:e=>p({...u,topic_id:e.target.value,lesson_id:""}),options:[{value:"",label:"-- Vyberte kurz --"},...a.Nl.map(e=>({value:e.id,label:e.title}))]}),y.length>0&&(0,s.jsx)(r.Ph,{label:"Lekce (voliteln\xe9)",value:u.lesson_id,onChange:e=>p({...u,lesson_id:e.target.value}),options:[{value:"",label:"-- Ž\xe1dn\xe1 konkr\xe9tn\xed lekce --"},...y.map(e=>({value:e.id,label:e.title}))]}),(0,s.jsx)(r.gx,{label:"Text ot\xe1zky",value:u.question,onChange:e=>p({...u,question:e.target.value}),rows:3,placeholder:"Kter\xe1 rovina děl\xed tělo na předn\xed a zadn\xed č\xe1st?"})]})}),(0,s.jsxs)(r.Zb,{title:"Odpovědi",subtitle:"Označte spr\xe1vnou odpověď",actions:u.options.length<6&&(0,s.jsx)(r.zx,{size:"sm",variant:"secondary",onClick:()=>{u&&!(u.options.length>=6)&&p({...u,options:[...u.options,""]})},children:"+ Přidat"}),children:[(0,s.jsx)("div",{className:"space-y-3",children:u.options.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("button",{onClick:()=>p({...u,correct_index:t}),className:"\n                      w-8 h-8 rounded-full border-2 flex items-center justify-center\n                      transition-colors flex-shrink-0\n                      ".concat(u.correct_index===t?"border-green-500 bg-green-500 text-white":"border-gray-300 hover:border-gray-400","\n                    "),children:u.correct_index===t&&"✓"}),(0,s.jsx)(r.II,{value:e,onChange:e=>g(t,e.target.value),placeholder:"Odpověď ".concat(t+1),className:"flex-1"}),u.options.length>2&&(0,s.jsx)("button",{onClick:()=>v(t),className:"p-2 text-red-400 hover:text-red-600",children:"✕"})]},t))}),(0,s.jsx)("p",{className:"mt-4 text-sm text-gray-500",children:"Klikněte na kroužek pro označen\xed spr\xe1vn\xe9 odpovědi."})]}),(0,s.jsx)(r.Zb,{title:"Vysvětlen\xed & Nastaven\xed",children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(r.gx,{label:"Vysvětlen\xed (po odpovědi)",value:u.explanation,onChange:e=>p({...u,explanation:e.target.value}),rows:3,placeholder:"Čeln\xed rovina proch\xe1z\xed tělem zleva doprava..."}),(0,s.jsxs)("div",{className:"grid sm:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Obt\xedžnost: ",u.difficulty,"/5"]}),(0,s.jsx)("input",{type:"range",min:"1",max:"5",value:u.difficulty,onChange:e=>p({...u,difficulty:parseInt(e.target.value)}),className:"w-full"}),(0,s.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[(0,s.jsx)("span",{children:"Snadn\xe1"}),(0,s.jsx)("span",{children:"Těžk\xe1"})]})]}),(0,s.jsx)("div",{className:"flex items-end",children:(0,s.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",checked:u.is_published,onChange:e=>p({...u,is_published:e.target.checked}),className:"w-5 h-5 rounded border-gray-300 text-[#7A9E8E] focus:ring-[#7A9E8E]"}),(0,s.jsx)("span",{className:"text-sm text-gray-700",children:"Publikovat ot\xe1zku"})]})})]})]})})]}),(0,s.jsx)("div",{children:(0,s.jsx)(r.Zb,{title:"N\xe1hled",className:"sticky top-20",children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)(r.Ct,{variant:u.difficulty<=2?"success":u.difficulty<=4?"warning":"danger",children:["Obt\xedžnost ",u.difficulty,"/5"]}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mt-3",children:u.question||"Text ot\xe1zky..."})]}),(0,s.jsx)("div",{className:"space-y-2",children:u.options.map((e,t)=>{let n=b===t,i=u.correct_index===t,l=null!==b,r="bg-white hover:bg-gray-50",a="border-gray-200";return l?i?(r="bg-green-50",a="border-green-500"):n&&(r="bg-red-50",a="border-red-500"):n&&(a="border-[#7A9E8E]"),(0,s.jsx)("button",{onClick:()=>!l&&f(t),disabled:l,className:"\n                        w-full p-4 rounded-xl border-2 text-left\n                        transition-all ".concat(r," ").concat(a,"\n                        ").concat(l?"cursor-default":"cursor-pointer","\n                      "),children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("span",{className:"\n                          w-7 h-7 rounded-full border-2 flex items-center justify-center text-sm\n                          ".concat(l&&i?"border-green-500 bg-green-500 text-white":"","\n                          ").concat(l&&n&&!i?"border-red-500 bg-red-500 text-white":"","\n                          ").concat(l?"":"border-gray-300","\n                        "),children:[l&&i&&"✓",l&&n&&!i&&"✕",!l&&String.fromCharCode(65+t)]}),(0,s.jsx)("span",{className:"text-gray-900",children:e||"Odpověď ".concat(t+1)})]})},t)})}),null!==b&&u.explanation&&(0,s.jsxs)("div",{className:"\n                  p-4 rounded-xl\n                  ".concat(b===u.correct_index?"bg-green-50":"bg-amber-50","\n                "),children:[(0,s.jsx)("p",{className:"font-medium mb-1",children:b===u.correct_index?"✅ Spr\xe1vně!":"❌ Špatně"}),(0,s.jsx)("p",{className:"text-sm text-gray-700",children:u.explanation})]}),null!==b&&(0,s.jsx)(r.zx,{variant:"secondary",className:"w-full",onClick:()=>f(null),children:"Zkusit znovu"}),null===b&&(0,s.jsx)("p",{className:"text-center text-sm text-gray-500",children:"Klikněte na odpověď pro test"})]})})})]})})}}},function(e){e.O(0,[648,5,290,307,971,117,744],function(){return e(e.s=4828)}),_N_E=e.O()}]);