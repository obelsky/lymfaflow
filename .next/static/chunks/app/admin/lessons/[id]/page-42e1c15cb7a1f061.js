(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[383],{9144:function(e,t,a){Promise.resolve().then(a.bind(a,113))},113:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return h}});var l=a(7437),i=a(2265),s=a(9376),n=a(9005),r=a(4614),d=a(1403),c=a(6401),o=a(8502);let p={text:"\uD83D\uDCDD",heading:"\uD83D\uDCCC",term:"\uD83D\uDCD6",professor:"\uD83C\uDF93",tip:"\uD83D\uDCA1",practice:"\uD83C\uDFAF",image:"\uD83D\uDDBC️"},u={text:"Text",heading:"Nadpis",term:"Term\xedn",professor:"Profesor",tip:"Tip",practice:"Cvičen\xed",image:"Obr\xe1zek"},x=()=>Math.random().toString(36).substr(2,9);function h(){return(0,l.jsx)(i.Suspense,{fallback:(0,l.jsx)(n.lq,{title:"Nač\xedt\xe1m...",subtitle:"",children:(0,l.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,l.jsx)("div",{className:"w-8 h-8 border-4 border-[#7A9E8E] border-t-transparent rounded-full animate-spin"})})}),children:(0,l.jsx)(m,{})})}function m(){let e=(0,s.useParams)(),t=(0,s.useRouter)(),a=(0,s.useSearchParams)(),h=e.id,m=a.get("topic"),[g,v]=(0,i.useState)(null),[b,j]=(0,i.useState)([]),[f,y]=(0,i.useState)([]),[N,k]=(0,i.useState)("content"),[C,D]=(0,i.useState)(null);(0,i.useEffect)(()=>{if("new"===h)v({id:"",topic_id:m||"",slug:"",title:"",why:"",human_explanation:"",tip:"",practice:"",xp_reward:20,estimated_minutes:5,is_published:!1}),j([]),y([]);else{let e=null,a="";for(let[t,l]of Object.entries(d.Lh)){let i=l.find(e=>e.id===h);if(i){e=i,a=t;break}}if(e){v({id:e.id,topic_id:a,slug:e.id,title:e.title,why:e.why,human_explanation:e.human_explanation,tip:e.tip||"",practice:e.practice||"",xp_reward:e.xp_reward,estimated_minutes:5,is_published:!0});let t=[];e.why&&(t.push({id:x(),type:"heading",data:{text:"Proč se to učit?"}}),t.push({id:x(),type:"text",data:{text:e.why}})),e.human_explanation&&t.push({id:x(),type:"professor",data:{professorId:"davinci",text:e.human_explanation}}),e.tip&&t.push({id:x(),type:"tip",data:{text:e.tip}}),j(t),e.points&&y(e.points.map(e=>({id:x(),term:e.term,definition:e.definition,latin:e.latin||"",tip:e.tip||""})))}else t.push("/admin/lessons")}},[h,m,t]);let I=e=>{let t={id:x(),type:e,data:w(e)};j([...b,t]),D(t.id)},w=e=>{switch(e){case"text":case"tip":case"practice":return{text:""};case"heading":return{text:"",level:2};case"term":return{term:"",definition:"",latin:""};case"professor":return{professorId:"davinci",text:"",variant:"default"};case"image":return{url:"",alt:"",caption:""};default:return{}}},_=(e,t)=>{j(b.map(a=>a.id===e?{...a,data:{...a.data,...t}}:a))},P=e=>{j(b.filter(t=>t.id!==e)),C===e&&D(null)},z=(e,t)=>{let a=b.findIndex(t=>t.id===e);if(-1===a)return;let l="up"===t?a-1:a+1;if(l<0||l>=b.length)return;let i=[...b];[i[a],i[l]]=[i[l],i[a]],j(i)},E=()=>{y([...f,{id:x(),term:"",definition:"",latin:"",tip:""}])},T=(e,t,a)=>{y(f.map(l=>l.id===e?{...l,[t]:a}:l))},Z=e=>{y(f.filter(t=>t.id!==e))};if(!g)return(0,l.jsx)(n.lq,{title:"Nač\xedt\xe1n\xed...",children:(0,l.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,l.jsx)("div",{className:"animate-spin w-8 h-8 border-4 border-[#7A9E8E] border-t-transparent rounded-full"})})});let A=r.Nl.find(e=>e.id===g.topic_id);return(0,l.jsxs)(n.lq,{title:"new"===h?"Nov\xe1 lekce":"Upravit: ".concat(g.title),subtitle:A?"Kurz: ".concat(A.title):"Nov\xe1 lekce",actions:(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(n.zx,{variant:"secondary",onClick:()=>t.push("/admin/lessons"),children:"Zrušit"}),(0,l.jsx)(n.zx,{variant:"secondary",onClick:()=>alert("N\xe1hled v nov\xe9m okně"),children:"N\xe1hled"}),(0,l.jsx)(n.zx,{onClick:()=>alert("V produkci by se uložilo do Supabase"),children:"Uložit"})]}),children:[(0,l.jsx)("div",{className:"flex gap-2 mb-6",children:["content","terms","settings"].map(e=>(0,l.jsxs)("button",{onClick:()=>k(e),className:"\n              px-4 py-2 rounded-lg text-sm font-medium transition-colors\n              ".concat(N===e?"bg-[#7A9E8E] text-white":"bg-white text-gray-600 hover:bg-gray-50 border border-gray-200","\n            "),children:["content"===e&&"Obsah (".concat(b.length,")"),"terms"===e&&"Term\xedny (".concat(f.length,")"),"settings"===e&&"Nastaven\xed"]},e))}),"content"===N&&(0,l.jsxs)("div",{className:"grid lg:grid-cols-3 gap-6",children:[(0,l.jsxs)("div",{className:"lg:col-span-2 space-y-4",children:[(0,l.jsx)(n.Zb,{title:"Z\xe1kladn\xed informace",children:(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"grid sm:grid-cols-2 gap-4",children:[(0,l.jsx)(n.II,{label:"N\xe1zev lekce",value:g.title,onChange:e=>v({...g,title:e.target.value}),placeholder:"Z\xe1kladn\xed roviny"}),(0,l.jsx)(n.Ph,{label:"Kurz",value:g.topic_id,onChange:e=>v({...g,topic_id:e.target.value}),options:[{value:"",label:"-- Vyberte kurz --"},...r.Nl.map(e=>({value:e.id,label:e.title}))]})]}),(0,l.jsx)(n.gx,{label:"Proč se to učit?",value:g.why,onChange:e=>v({...g,why:e.target.value}),rows:2,placeholder:"Motivace pro studenta..."})]})}),(0,l.jsx)(n.Zb,{title:"Bloky obsahu",subtitle:"Klikněte pro editaci, přet\xe1hněte pro změnu pořad\xed",children:0===b.length?(0,l.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,l.jsx)("p",{className:"mb-4",children:"Zat\xedm ž\xe1dn\xe9 bloky"}),(0,l.jsx)("p",{className:"text-sm",children:"Přidejte bloky pomoc\xed panelu vpravo"})]}):(0,l.jsx)("div",{className:"space-y-3",children:b.map((e,t)=>(0,l.jsxs)("div",{onClick:()=>D(e.id),className:"\n                        p-4 rounded-lg border cursor-pointer transition-all\n                        ".concat(C===e.id?"border-[#7A9E8E] ring-2 ring-[#7A9E8E]/20":"border-gray-200 hover:border-gray-300","\n                      "),children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{children:p[e.type]}),(0,l.jsx)("span",{className:"text-sm font-medium text-gray-600",children:u[e.type]})]}),(0,l.jsxs)("div",{className:"flex gap-1",children:[(0,l.jsx)("button",{onClick:t=>{t.stopPropagation(),z(e.id,"up")},disabled:0===t,className:"p-1 text-gray-400 hover:text-gray-600 disabled:opacity-30",children:"↑"}),(0,l.jsx)("button",{onClick:t=>{t.stopPropagation(),z(e.id,"down")},disabled:t===b.length-1,className:"p-1 text-gray-400 hover:text-gray-600 disabled:opacity-30",children:"↓"}),(0,l.jsx)("button",{onClick:t=>{t.stopPropagation(),P(e.id)},className:"p-1 text-red-400 hover:text-red-600",children:"✕"})]})]}),(0,l.jsxs)("div",{className:"text-sm text-gray-700",children:["text"===e.type&&(0,l.jsx)("p",{className:"line-clamp-2",children:e.data.text||"Pr\xe1zdn\xfd text..."}),"heading"===e.type&&(0,l.jsx)("p",{className:"font-bold",children:e.data.text||"Nadpis..."}),"professor"===e.type&&(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(n.Ct,{variant:"info",children:e.data.professorId}),(0,l.jsx)("span",{className:"truncate",children:e.data.text||"Zpr\xe1va profesora..."})]}),"tip"===e.type&&(0,l.jsxs)("p",{className:"text-amber-700",children:["\uD83D\uDCA1 ",e.data.text||"Tip..."]}),"practice"===e.type&&(0,l.jsxs)("p",{className:"text-green-700",children:["\uD83C\uDFAF ",e.data.text||"Cvičen\xed..."]}),"term"===e.type&&(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:e.data.term||"Term\xedn"}),": ",e.data.definition||"Definice..."]}),"image"===e.type&&(0,l.jsxs)("p",{className:"text-gray-500",children:["\uD83D\uDDBC️ ",e.data.alt||"Obr\xe1zek"]})]})]},e.id))})})]}),(0,l.jsxs)("div",{className:"lg:col-span-1 space-y-4",children:[(0,l.jsx)(n.Zb,{title:"Přidat blok",children:(0,l.jsx)("div",{className:"grid grid-cols-2 gap-2",children:Object.keys(u).map(e=>(0,l.jsxs)("button",{onClick:()=>I(e),className:"flex flex-col items-center gap-1 p-3 rounded-lg bg-gray-50 hover:bg-gray-100 transition-colors",children:[(0,l.jsx)("span",{className:"text-xl",children:p[e]}),(0,l.jsx)("span",{className:"text-xs text-gray-600",children:u[e]})]},e))})}),C&&(0,l.jsx)(n.Zb,{title:"Upravit blok",children:(()=>{let e=b.find(e=>e.id===C);return e?(0,l.jsxs)("div",{className:"space-y-3",children:[("text"===e.type||"tip"===e.type||"practice"===e.type)&&(0,l.jsx)(n.gx,{label:"Text",value:e.data.text,onChange:t=>_(e.id,{text:t.target.value}),rows:4}),"heading"===e.type&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.II,{label:"Text nadpisu",value:e.data.text,onChange:t=>_(e.id,{text:t.target.value})}),(0,l.jsx)(n.Ph,{label:"\xdaroveň",value:String(e.data.level||2),onChange:t=>_(e.id,{level:parseInt(t.target.value)}),options:[{value:"2",label:"H2 - Hlavn\xed"},{value:"3",label:"H3 - Podnadpis"},{value:"4",label:"H4 - Menš\xed"}]})]}),"professor"===e.type&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.Ph,{label:"Profesor",value:e.data.professorId,onChange:t=>_(e.id,{professorId:t.target.value}),options:c.Uh.map(e=>({value:e.id,label:e.name}))}),(0,l.jsx)(n.gx,{label:"Zpr\xe1va",value:e.data.text,onChange:t=>_(e.id,{text:t.target.value}),rows:4}),(0,l.jsx)(n.Ph,{label:"Varianta",value:e.data.variant||"default",onChange:t=>_(e.id,{variant:t.target.value}),options:[{value:"default",label:"V\xfdchoz\xed"},{value:"tip",label:"Tip"},{value:"question",label:"Ot\xe1zka"}]})]}),"term"===e.type&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.II,{label:"Term\xedn",value:e.data.term,onChange:t=>_(e.id,{term:t.target.value})}),(0,l.jsx)(n.II,{label:"Latinsky",value:e.data.latin||"",onChange:t=>_(e.id,{latin:t.target.value})}),(0,l.jsx)(n.gx,{label:"Definice",value:e.data.definition,onChange:t=>_(e.id,{definition:t.target.value}),rows:3})]}),"image"===e.type&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.II,{label:"URL obr\xe1zku",value:e.data.url,onChange:t=>_(e.id,{url:t.target.value}),placeholder:"https://..."}),(0,l.jsx)(n.II,{label:"Alt text",value:e.data.alt,onChange:t=>_(e.id,{alt:t.target.value})}),(0,l.jsx)(n.II,{label:"Popisek",value:e.data.caption||"",onChange:t=>_(e.id,{caption:t.target.value})})]})]}):null})()}),C&&(0,l.jsx)(n.Zb,{title:"N\xe1hled",children:(()=>{let e=b.find(e=>e.id===C);return e?"professor"===e.type&&e.data.text?(0,l.jsx)(o.jz,{professorId:e.data.professorId,variant:e.data.variant||"default",children:e.data.text}):(0,l.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg text-sm",children:e.data.text||e.data.term||"Pr\xe1zdn\xfd blok"}):null})()})]})]}),"terms"===N&&(0,l.jsx)(n.Zb,{title:"Kl\xedčov\xe9 term\xedny",subtitle:"Term\xedny zobrazen\xe9 na konci lekce",actions:(0,l.jsx)(n.zx,{size:"sm",onClick:E,children:"+ Přidat term\xedn"}),children:0===f.length?(0,l.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,l.jsx)("p",{className:"mb-4",children:"Zat\xedm ž\xe1dn\xe9 term\xedny"}),(0,l.jsx)(n.zx,{onClick:E,children:"Přidat prvn\xed term\xedn"})]}):(0,l.jsx)("div",{className:"space-y-4",children:f.map((e,t)=>(0,l.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,l.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,l.jsxs)("span",{className:"text-sm font-medium text-gray-500",children:["#",t+1]}),(0,l.jsx)("button",{onClick:()=>Z(e.id),className:"text-red-400 hover:text-red-600",children:"✕"})]}),(0,l.jsxs)("div",{className:"grid sm:grid-cols-2 gap-3",children:[(0,l.jsx)(n.II,{label:"Term\xedn",value:e.term,onChange:t=>T(e.id,"term",t.target.value),placeholder:"Sagit\xe1ln\xed rovina"}),(0,l.jsx)(n.II,{label:"Latinsky",value:e.latin,onChange:t=>T(e.id,"latin",t.target.value),placeholder:"Planum sagittale"})]}),(0,l.jsx)("div",{className:"mt-3",children:(0,l.jsx)(n.gx,{label:"Definice",value:e.definition,onChange:t=>T(e.id,"definition",t.target.value),rows:2,placeholder:"Rovina proch\xe1zej\xedc\xed tělem zepředu dozadu..."})}),(0,l.jsx)("div",{className:"mt-3",children:(0,l.jsx)(n.II,{label:"Tip (voliteln\xe9)",value:e.tip,onChange:t=>T(e.id,"tip",t.target.value),placeholder:"Pamatuj si: sagit\xe1ln\xed = jako š\xedp..."})})]},e.id))})}),"settings"===N&&(0,l.jsx)(n.Zb,{title:"Nastaven\xed lekce",children:(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"grid sm:grid-cols-2 gap-4",children:[(0,l.jsx)(n.II,{label:"XP odměna",type:"number",value:g.xp_reward,onChange:e=>v({...g,xp_reward:parseInt(e.target.value)||0})}),(0,l.jsx)(n.II,{label:"Odhadovan\xfd čas (min)",type:"number",value:g.estimated_minutes,onChange:e=>v({...g,estimated_minutes:parseInt(e.target.value)||0})})]}),(0,l.jsx)(n.gx,{label:"Praktick\xe9 cvičen\xed",value:g.practice,onChange:e=>v({...g,practice:e.target.value}),rows:3,placeholder:"\xdakol pro studenta..."}),(0,l.jsx)(n.gx,{label:"Tip na z\xe1věr",value:g.tip,onChange:e=>v({...g,tip:e.target.value}),rows:2,placeholder:"Užitečn\xfd tip..."}),(0,l.jsx)("div",{className:"pt-4 border-t",children:(0,l.jsxs)("label",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg cursor-pointer",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium text-gray-900",children:"Publikovat lekci"}),(0,l.jsx)("p",{className:"text-sm text-gray-500",children:"Lekce bude viditeln\xe1 pro studenty"})]}),(0,l.jsx)("input",{type:"checkbox",checked:g.is_published,onChange:e=>v({...g,is_published:e.target.checked}),className:"w-5 h-5 rounded border-gray-300 text-[#7A9E8E] focus:ring-[#7A9E8E]"})]})})]})})]})}}},function(e){e.O(0,[648,5,290,401,502,971,117,744],function(){return e(e.s=9144)}),_N_E=e.O()}]);