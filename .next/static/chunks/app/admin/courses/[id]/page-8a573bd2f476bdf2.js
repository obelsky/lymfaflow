(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[962],{6825:function(e,s,t){Promise.resolve().then(t.bind(t,8371))},8371:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return m}});var l=t(7437),a=t(2265),r=t(9376),i=t(7648),n=t(9005),c=t(4614),o=t(1403),d=t(9307),x=t(6401),u=t(8502);let h=()=>(0,l.jsxs)("svg",{className:"w-4 h-4 text-gray-400",viewBox:"0 0 24 24",fill:"currentColor",children:[(0,l.jsx)("circle",{cx:"9",cy:"6",r:"1.5"}),(0,l.jsx)("circle",{cx:"15",cy:"6",r:"1.5"}),(0,l.jsx)("circle",{cx:"9",cy:"12",r:"1.5"}),(0,l.jsx)("circle",{cx:"15",cy:"12",r:"1.5"}),(0,l.jsx)("circle",{cx:"9",cy:"18",r:"1.5"}),(0,l.jsx)("circle",{cx:"15",cy:"18",r:"1.5"})]});function m(){var e,s;let t=(0,r.useParams)(),m=(0,r.useRouter)(),g=t.id,[p,j]=(0,a.useState)(null),[v,b]=(0,a.useState)([]),[f,y]=(0,a.useState)("general"),[N,k]=(0,a.useState)(null);(0,a.useEffect)(()=>{if("new"===g)j({id:"",slug:"",title:"",subtitle:"",description:"",icon:"Book",color:"#7A9E8E",is_locked:!1,is_published:!1,professor_id:"davinci"}),b([]);else{let e=(0,c.fY)(g);e?(j({id:e.id,slug:e.id,title:e.title,subtitle:e.subtitle,description:"",icon:e.icon,color:e.color,is_locked:e.is_locked,is_published:!0,professor_id:"davinci"}),b((0,o.Dh)(g).map(e=>{var s;return{id:e.id,title:e.title,points:(null===(s=e.points)||void 0===s?void 0:s.length)||0,xp:e.xp_reward}}))):m.push("/admin/courses")}},[g,m]);let z=e=>{k(e)},w=(e,s)=>{if(e.preventDefault(),null===N||N===s)return;let t=[...v],l=t[N];t.splice(N,1),t.splice(s,0,l),b(t),k(s)},C=()=>{k(null)};if(!p)return(0,l.jsx)(n.lq,{title:"Nač\xedt\xe1n\xed...",children:(0,l.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,l.jsx)("div",{className:"animate-spin w-8 h-8 border-4 border-[#7A9E8E] border-t-transparent rounded-full"})})});let _=(null===(e=d.Sz[g])||void 0===e?void 0:e.length)||0,E=x.Uh.find(e=>e.id===p.professor_id);return(0,l.jsx)(n.lq,{title:"new"===g?"Nov\xfd kurz":"Upravit: ".concat(p.title),subtitle:"new"===g?"Vytvořit nov\xfd kurz":"".concat(v.length," lekc\xed • ").concat(_," ot\xe1zek"),actions:(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(n.zx,{variant:"secondary",onClick:()=>m.push("/admin/courses"),children:"Zrušit"}),(0,l.jsx)(n.zx,{onClick:()=>alert("V produkci by se uložilo do Supabase"),children:"Uložit změny"})]}),children:(0,l.jsxs)("div",{className:"grid lg:grid-cols-3 gap-6",children:[(0,l.jsx)("div",{className:"lg:col-span-1",children:(0,l.jsxs)(n.Zb,{title:"N\xe1hled",className:"sticky top-20",children:[(0,l.jsxs)("div",{className:"rounded-xl p-5 mb-4",style:{backgroundColor:"".concat(p.color,"15")},children:[(0,l.jsxs)("div",{className:"flex items-start gap-4",children:[(0,l.jsx)("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center text-white text-xl",style:{backgroundColor:p.color},children:(null===(s=p.icon)||void 0===s?void 0:s.slice(0,1))||"\uD83D\uDCDA"}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("h3",{className:"font-bold text-gray-900",children:p.title||"N\xe1zev kurzu"}),(0,l.jsx)("p",{className:"text-sm text-gray-600",children:p.subtitle||"Popis kurzu"})]})]}),(0,l.jsxs)("div",{className:"mt-4 flex items-center justify-between text-sm",children:[(0,l.jsxs)("span",{className:"text-gray-500",children:[v.length," lekc\xed"]}),(0,l.jsxs)("span",{className:"text-gray-500",children:[_," ot\xe1zek"]})]}),(0,l.jsxs)("div",{className:"mt-4 flex gap-2",children:[(0,l.jsx)(n.Ct,{variant:p.is_published?"success":"default",children:p.is_published?"Publikov\xe1no":"Koncept"}),p.is_locked&&(0,l.jsx)(n.Ct,{variant:"warning",children:"\uD83D\uDD12 Zamčeno"})]})]}),E&&(0,l.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,l.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:"Přiřazen\xfd profesor"}),(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center",style:{backgroundColor:"".concat(E.accentColor,"15")},children:(0,l.jsx)(u.qR,{professorId:E.id,className:"w-8 h-8",color:E.accentColor})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium text-sm",children:E.name}),(0,l.jsx)("p",{className:"text-xs text-gray-500",children:E.teachingMethod})]})]})]})]})}),(0,l.jsxs)("div",{className:"lg:col-span-2",children:[(0,l.jsx)("div",{className:"flex gap-2 mb-6",children:["general","lessons","settings"].map(e=>(0,l.jsxs)("button",{onClick:()=>y(e),className:"\n                  px-4 py-2 rounded-lg text-sm font-medium transition-colors\n                  ".concat(f===e?"bg-[#7A9E8E] text-white":"bg-white text-gray-600 hover:bg-gray-50 border border-gray-200","\n                "),children:["general"===e&&"Obecn\xe9","lessons"===e&&"Lekce (".concat(v.length,")"),"settings"===e&&"Nastaven\xed"]},e))}),"general"===f&&(0,l.jsx)(n.Zb,{title:"Z\xe1kladn\xed informace",children:(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"grid sm:grid-cols-2 gap-4",children:[(0,l.jsx)(n.II,{label:"N\xe1zev kurzu",value:p.title,onChange:e=>j({...p,title:e.target.value}),placeholder:"Anatomick\xe9 roviny"}),(0,l.jsx)(n.II,{label:"Slug (URL)",value:p.slug,onChange:e=>j({...p,slug:e.target.value}),placeholder:"anatomicke-roviny"})]}),(0,l.jsx)(n.II,{label:"Podtitul",value:p.subtitle,onChange:e=>j({...p,subtitle:e.target.value}),placeholder:"Jak popisujeme polohu struktur"}),(0,l.jsx)(n.gx,{label:"Popis",value:p.description,onChange:e=>j({...p,description:e.target.value}),rows:3,placeholder:"Detailn\xed popis kurzu..."}),(0,l.jsxs)("div",{className:"grid sm:grid-cols-2 gap-4",children:[(0,l.jsx)(n.II,{label:"Ikona",value:p.icon,onChange:e=>j({...p,icon:e.target.value}),placeholder:"Book, Bone, Heart..."}),(0,l.jsx)(n.II,{label:"Barva",type:"color",value:p.color,onChange:e=>j({...p,color:e.target.value})})]}),(0,l.jsx)(n.Ph,{label:"Přiřazen\xfd profesor",value:p.professor_id,onChange:e=>j({...p,professor_id:e.target.value}),options:x.Uh.map(e=>({value:e.id,label:"".concat(e.name," (").concat(e.teachingMethod,")")}))})]})}),"lessons"===f&&(0,l.jsxs)(n.Zb,{title:"Lekce",subtitle:"Přet\xe1hněte pro změnu pořad\xed",actions:(0,l.jsx)(i.default,{href:"/admin/lessons/new?topic=".concat(g),children:(0,l.jsx)(n.zx,{size:"sm",children:"+ Nov\xe1 lekce"})}),children:[0===v.length?(0,l.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,l.jsx)("p",{className:"mb-4",children:"Zat\xedm ž\xe1dn\xe9 lekce"}),(0,l.jsx)(i.default,{href:"/admin/lessons/new?topic=".concat(g),children:(0,l.jsx)(n.zx,{children:"Vytvořit prvn\xed lekci"})})]}):(0,l.jsx)("div",{className:"space-y-2",children:v.map((e,s)=>(0,l.jsxs)("div",{draggable:!0,onDragStart:()=>z(s),onDragOver:e=>w(e,s),onDragEnd:C,className:"\n                        flex items-center gap-3 p-3 rounded-lg border bg-white\n                        cursor-move hover:shadow-sm transition-shadow\n                        ".concat(N===s?"opacity-50 border-[#7A9E8E]":"border-gray-200","\n                      "),children:[(0,l.jsx)("div",{className:"cursor-grab active:cursor-grabbing",children:(0,l.jsx)(h,{})}),(0,l.jsx)("div",{className:"w-8 h-8 rounded-lg bg-gray-100 flex items-center justify-center text-sm font-medium text-gray-600",children:s+1}),(0,l.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,l.jsx)("p",{className:"font-medium text-gray-900 truncate",children:e.title}),(0,l.jsxs)("p",{className:"text-xs text-gray-500",children:[e.points," bodů • ",e.xp," XP"]})]}),(0,l.jsx)(i.default,{href:"/admin/lessons/".concat(e.id),children:(0,l.jsx)(n.zx,{variant:"ghost",size:"sm",children:"Upravit"})})]},e.id))}),(0,l.jsx)("div",{className:"mt-6 pt-4 border-t border-gray-100",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium text-gray-900",children:"Quiz ot\xe1zky"}),(0,l.jsxs)("p",{className:"text-sm text-gray-500",children:[_," ot\xe1zek pro tento kurz"]})]}),(0,l.jsx)(i.default,{href:"/admin/questions?topic=".concat(g),children:(0,l.jsx)(n.zx,{variant:"secondary",size:"sm",children:"Spravovat ot\xe1zky"})})]})})]}),"settings"===f&&(0,l.jsx)(n.Zb,{title:"Nastaven\xed",children:(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)("h4",{className:"font-medium text-gray-900",children:"Viditelnost"}),(0,l.jsxs)("label",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg cursor-pointer",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium text-gray-900",children:"Publikovat kurz"}),(0,l.jsx)("p",{className:"text-sm text-gray-500",children:"Kurz bude viditeln\xfd pro studenty"})]}),(0,l.jsx)("input",{type:"checkbox",checked:p.is_published,onChange:e=>j({...p,is_published:e.target.checked}),className:"w-5 h-5 rounded border-gray-300 text-[#7A9E8E] focus:ring-[#7A9E8E]"})]}),(0,l.jsxs)("label",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg cursor-pointer",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium text-gray-900",children:"Zamknout kurz"}),(0,l.jsx)("p",{className:"text-sm text-gray-500",children:"Kurz bude vyžadovat předchoz\xed dokončen\xed"})]}),(0,l.jsx)("input",{type:"checkbox",checked:p.is_locked,onChange:e=>j({...p,is_locked:e.target.checked}),className:"w-5 h-5 rounded border-gray-300 text-[#7A9E8E] focus:ring-[#7A9E8E]"})]})]}),(0,l.jsxs)("div",{className:"pt-4 border-t border-gray-200",children:[(0,l.jsx)("h4",{className:"font-medium text-red-600 mb-4",children:"Danger Zone"}),(0,l.jsx)(n.zx,{variant:"danger",onClick:()=>{confirm("Opravdu chcete smazat tento kurz? Tato akce je nevratn\xe1.")&&alert("V produkci by se kurz smazal (soft delete)")},children:"Smazat kurz"})]})]})})]})]})})}}},function(e){e.O(0,[648,5,290,401,502,307,971,117,744],function(){return e(e.s=6825)}),_N_E=e.O()}]);