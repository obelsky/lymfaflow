"use strict";exports.id=159,exports.ids=[159],exports.modules={4159:(e,s,t)=>{t.d(s,{zL:()=>x});var r=t(326),a=t(7577),o=t(1515),l=t(1899);function n({message:e,professor:s}){if("user"===e.role)return r.jsx("div",{className:"flex justify-end mb-4",children:r.jsx("div",{className:"max-w-[80%] bg-[#7A9E8E] text-white px-4 py-3 rounded-2xl rounded-br-md",children:r.jsx("p",{className:"text-sm whitespace-pre-wrap",children:e.content})})});if("assistant"===e.role)return(0,r.jsxs)("div",{className:"flex gap-3 mb-4",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center",style:{backgroundColor:`${s.accentColor}15`},children:r.jsx(l.qR,{professorId:s.id,className:"w-8 h-8",color:s.accentColor})})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-xs text-gray-500 mb-1",children:s.shortName}),r.jsx("div",{className:"px-4 py-3 rounded-2xl rounded-tl-md",style:{backgroundColor:`${s.accentColor}10`},children:r.jsx("p",{className:"text-sm text-gray-800 whitespace-pre-wrap",children:e.content})})]})]});if(e.isHandoff){let s=e.professorId?(0,o.kT)(e.professorId):null;return r.jsx("div",{className:"flex justify-center mb-4",children:(0,r.jsxs)("div",{className:"bg-gray-100 px-4 py-2 rounded-full text-sm text-gray-600 flex items-center gap-2",children:[r.jsx("span",{children:"\uD83D\uDD04"}),r.jsx("span",{children:e.content}),s&&r.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center",style:{backgroundColor:s.accentColor},children:r.jsx(l.qR,{professorId:s.id,className:"w-5 h-5",color:"#fff"})})]})})}return null}function i({onSend:e,isLoading:s,placeholder:t="Napiš zpr\xe1vu..."}){let[o,l]=(0,a.useState)(""),n=(0,a.useRef)(null),i=t=>{t?.preventDefault(),o.trim()&&!s&&(e(o.trim()),l(""))};return(0,r.jsxs)("form",{onSubmit:i,className:"flex gap-2 items-end p-4 border-t border-gray-200 bg-white",children:[r.jsx("div",{className:"flex-1 relative",children:r.jsx("textarea",{ref:n,value:o,onChange:e=>l(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),i())},placeholder:t,disabled:s,rows:1,className:"w-full px-4 py-3 pr-12 border border-gray-200 rounded-2xl resize-none focus:outline-none focus:ring-2 focus:ring-[#7A9E8E]/50 focus:border-[#7A9E8E] disabled:bg-gray-50 disabled:text-gray-400 text-sm",style:{maxHeight:"120px"}})}),r.jsx("button",{type:"submit",disabled:!o.trim()||s,className:"w-11 h-11 flex-shrink-0 bg-[#7A9E8E] text-white rounded-xl flex items-center justify-center hover:bg-[#6A8E7E] disabled:bg-gray-200 disabled:text-gray-400 transition-colors",children:s?(0,r.jsxs)("svg",{className:"w-5 h-5 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[r.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2",strokeOpacity:"0.3"}),r.jsx("path",{d:"M12 2a10 10 0 0 1 10 10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}):r.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:r.jsx("path",{d:"M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"})})})]})}function d({professor:e,onSelect:s,lessonTitle:t}){let a=[t?`Vysvětli mi ${t}`:null,"Můžeš to vysvětlit jednodušeji?","Dej mi př\xedklad z praxe","Co je nejdůležitějš\xed zapamatovat si?","Jak to můžu procvičit?"].filter(Boolean);return(0,r.jsxs)("div",{className:"px-4 py-3 border-t border-gray-100",children:[r.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Rychl\xe9 ot\xe1zky:"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:a.map(e=>r.jsx("button",{onClick:()=>s(e),className:"px-3 py-1.5 text-xs bg-gray-100 hover:bg-gray-200  rounded-full text-gray-700 transition-colors",children:e},e))})]})}function c({currentProfessorId:e,onSelect:s,suggestedProfessorId:t}){return r.jsx("div",{className:"flex gap-2 p-3 overflow-x-auto",children:o.Uh.map(a=>{let o=a.id===e,n=a.id===t;return(0,r.jsxs)("button",{onClick:()=>s(a.id),className:`
              flex items-center gap-2 px-3 py-2 rounded-xl transition-all flex-shrink-0
              ${o?"bg-[#7A9E8E] text-white":"bg-gray-100 hover:bg-gray-200 text-gray-700"}
              ${n&&!o?"ring-2 ring-amber-400 ring-offset-1":""}
            `,children:[r.jsx("div",{className:"w-7 h-7 rounded-lg flex items-center justify-center",style:{backgroundColor:o?"rgba(255,255,255,0.2)":`${a.accentColor}15`},children:r.jsx(l.qR,{professorId:a.id,className:"w-5 h-5",color:o?"#fff":a.accentColor})}),r.jsx("span",{className:"text-sm font-medium",children:a.shortName}),n&&!o&&r.jsx("span",{className:"text-xs bg-amber-400 text-amber-900 px-1.5 py-0.5 rounded-full",children:"doporučen\xfd"})]},a.id)})})}function x({initialProfessorId:e="davinci",lessonContext:s,onClose:t,className:x=""}){let[m,u]=(0,a.useState)([]),[f,h]=(0,a.useState)(e),[p,g]=(0,a.useState)(!1),[j,y]=(0,a.useState)(),[b,w]=(0,a.useState)(!0),v=(0,a.useRef)(null),N=(0,o.kT)(f);(0,a.useCallback)(()=>{v.current?.scrollIntoView({behavior:"smooth"})},[]);let k=async e=>{if(!e.trim())return;w(!1);let t={id:Date.now().toString(),role:"user",content:e,timestamp:new Date};u(e=>[...e,t]),g(!0);try{let e=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:[...m,t],professorId:f,lessonContext:s,checkHandoff:!0})});if(!e.ok)throw Error("Chat API error");let r=await e.json(),a={id:(Date.now()+1).toString(),role:"assistant",content:r.message,professorId:f,timestamp:new Date};u(e=>[...e,a]),r.handoff?.suggested?y(r.handoff.toProfessorId):y(void 0)}catch(e){console.error("Chat error:",e),u(e=>[...e,{id:(Date.now()+1).toString(),role:"assistant",content:"Omlouv\xe1m se, něco se pokazilo. Zkus to pros\xedm znovu.",professorId:f,timestamp:new Date}])}finally{g(!1)}};return(0,r.jsxs)("div",{className:`flex flex-col h-full bg-white rounded-xl shadow-lg overflow-hidden ${x}`,children:[(0,r.jsxs)("div",{className:"px-4 py-3 flex items-center justify-between",style:{backgroundColor:N.accentColor},children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-white/20 flex items-center justify-center",children:r.jsx(l.qR,{professorId:N.id,className:"w-8 h-8",color:"#fff"})}),(0,r.jsxs)("div",{className:"text-white",children:[r.jsx("h3",{className:"font-semibold",children:N.name}),r.jsx("p",{className:"text-xs opacity-80",children:N.tagline})]})]}),t&&r.jsx("button",{onClick:t,className:"w-8 h-8 rounded-lg bg-white/20 hover:bg-white/30 flex items-center justify-center text-white transition-colors",children:r.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:r.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})})]}),r.jsx(c,{currentProfessorId:f,onSelect:e=>{if(e===f)return;let s=(0,o.kT)(e),t={id:Date.now().toString(),role:"system",content:`${N.shortName} předal/a konverzaci ${s.shortName}`,professorId:e,timestamp:new Date,isHandoff:!0},r={id:(Date.now()+1).toString(),role:"assistant",content:`${s.signaturePhrases[0]||"Ahoj!"} Převzal/a jsem štafetu. Jak ti můžu pomoct?`,professorId:e,timestamp:new Date};u(e=>[...e,t,r]),h(e),y(void 0)},suggestedProfessorId:j}),(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto p-4",children:[m.map(e=>r.jsx(n,{message:e,professor:e.professorId?(0,o.kT)(e.professorId):N},e.id)),p&&(0,r.jsxs)("div",{className:"flex gap-3 mb-4",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center",style:{backgroundColor:`${N.accentColor}15`},children:r.jsx(l.qR,{professorId:N.id,className:"w-8 h-8",color:N.accentColor})}),r.jsx("div",{className:"px-4 py-3 rounded-2xl rounded-tl-md",style:{backgroundColor:`${N.accentColor}10`},children:(0,r.jsxs)("div",{className:"flex gap-1",children:[r.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),r.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),r.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})]}),r.jsx("div",{ref:v})]}),b&&m.length<=2&&r.jsx(d,{professor:N,onSelect:k,lessonTitle:s?.lessonTitle}),r.jsx(i,{onSend:k,isLoading:p,placeholder:`Zeptej se ${N.shortName}...`})]})}}};