(()=>{var e={};e.id=383,e.ids=[383],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3471:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>c,routeModule:()=>x,tree:()=>o}),a(32),a(1506),a(5866);var s=a(3191),l=a(8716),r=a(7922),i=a.n(r),n=a(5231),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);a.d(t,d);let o=["",{children:["admin",{children:["lessons",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,32)),"/Users/ondrej/Documents/moje-weby/lymfaflow/app/admin/lessons/[id]/page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,1506)),"/Users/ondrej/Documents/moje-weby/lymfaflow/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/ondrej/Documents/moje-weby/lymfaflow/app/admin/lessons/[id]/page.tsx"],p="/admin/lessons/[id]/page",u={require:a,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/admin/lessons/[id]/page",pathname:"/admin/lessons/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},9443:(e,t,a)=>{Promise.resolve().then(a.bind(a,6870))},6870:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>x});var s=a(326),l=a(7577),r=a(5047),i=a(8301),n=a(8646);a(9147);var d=a(1515),o=a(1899);let c={text:"\uD83D\uDCDD",heading:"\uD83D\uDCCC",term:"\uD83D\uDCD6",professor:"\uD83C\uDF93",tip:"\uD83D\uDCA1",practice:"\uD83C\uDFAF",image:"\uD83D\uDDBC️"},p={text:"Text",heading:"Nadpis",term:"Term\xedn",professor:"Profesor",tip:"Tip",practice:"Cvičen\xed",image:"Obr\xe1zek"},u=()=>Math.random().toString(36).substr(2,9);function x(){return s.jsx(l.Suspense,{fallback:s.jsx(i.lq,{title:"Nač\xedt\xe1m...",subtitle:"",children:s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx("div",{className:"w-8 h-8 border-4 border-[#7A9E8E] border-t-transparent rounded-full animate-spin"})})}),children:s.jsx(m,{})})}function m(){let e=(0,r.useParams)(),t=(0,r.useRouter)(),a=(0,r.useSearchParams)(),x=e.id;a.get("topic");let[m,h]=(0,l.useState)(null),[g,v]=(0,l.useState)([]),[j,b]=(0,l.useState)([]),[y,f]=(0,l.useState)("content"),[N,C]=(0,l.useState)(null),k=e=>{let t={id:u(),type:e,data:P(e)};v([...g,t]),C(t.id)},P=e=>{switch(e){case"text":case"tip":case"practice":return{text:""};case"heading":return{text:"",level:2};case"term":return{term:"",definition:"",latin:""};case"professor":return{professorId:"davinci",text:"",variant:"default"};case"image":return{url:"",alt:"",caption:""};default:return{}}},D=(e,t)=>{v(g.map(a=>a.id===e?{...a,data:{...a.data,...t}}:a))},I=e=>{v(g.filter(t=>t.id!==e)),N===e&&C(null)},w=(e,t)=>{let a=g.findIndex(t=>t.id===e);if(-1===a)return;let s="up"===t?a-1:a+1;if(s<0||s>=g.length)return;let l=[...g];[l[a],l[s]]=[l[s],l[a]],v(l)},z=()=>{b([...j,{id:u(),term:"",definition:"",latin:"",tip:""}])},_=(e,t,a)=>{b(j.map(s=>s.id===e?{...s,[t]:a}:s))},E=e=>{b(j.filter(t=>t.id!==e))};if(!m)return s.jsx(i.lq,{title:"Nač\xedt\xe1n\xed...",children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-[#7A9E8E] border-t-transparent rounded-full"})})});let A=n.Nl.find(e=>e.id===m.topic_id);return(0,s.jsxs)(i.lq,{title:"new"===x?"Nov\xe1 lekce":`Upravit: ${m.title}`,subtitle:A?`Kurz: ${A.title}`:"Nov\xe1 lekce",actions:(0,s.jsxs)("div",{className:"flex gap-2",children:[s.jsx(i.zx,{variant:"secondary",onClick:()=>t.push("/admin/lessons"),children:"Zrušit"}),s.jsx(i.zx,{variant:"secondary",onClick:()=>alert("N\xe1hled v nov\xe9m okně"),children:"N\xe1hled"}),s.jsx(i.zx,{onClick:()=>alert("V produkci by se uložilo do Supabase"),children:"Uložit"})]}),children:[s.jsx("div",{className:"flex gap-2 mb-6",children:["content","terms","settings"].map(e=>(0,s.jsxs)("button",{onClick:()=>f(e),className:`
              px-4 py-2 rounded-lg text-sm font-medium transition-colors
              ${y===e?"bg-[#7A9E8E] text-white":"bg-white text-gray-600 hover:bg-gray-50 border border-gray-200"}
            `,children:["content"===e&&`Obsah (${g.length})`,"terms"===e&&`Term\xedny (${j.length})`,"settings"===e&&"Nastaven\xed"]},e))}),"content"===y&&(0,s.jsxs)("div",{className:"grid lg:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{className:"lg:col-span-2 space-y-4",children:[s.jsx(i.Zb,{title:"Z\xe1kladn\xed informace",children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid sm:grid-cols-2 gap-4",children:[s.jsx(i.II,{label:"N\xe1zev lekce",value:m.title,onChange:e=>h({...m,title:e.target.value}),placeholder:"Z\xe1kladn\xed roviny"}),s.jsx(i.Ph,{label:"Kurz",value:m.topic_id,onChange:e=>h({...m,topic_id:e.target.value}),options:[{value:"",label:"-- Vyberte kurz --"},...n.Nl.map(e=>({value:e.id,label:e.title}))]})]}),s.jsx(i.gx,{label:"Proč se to učit?",value:m.why,onChange:e=>h({...m,why:e.target.value}),rows:2,placeholder:"Motivace pro studenta..."})]})}),s.jsx(i.Zb,{title:"Bloky obsahu",subtitle:"Klikněte pro editaci, přet\xe1hněte pro změnu pořad\xed",children:0===g.length?(0,s.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[s.jsx("p",{className:"mb-4",children:"Zat\xedm ž\xe1dn\xe9 bloky"}),s.jsx("p",{className:"text-sm",children:"Přidejte bloky pomoc\xed panelu vpravo"})]}):s.jsx("div",{className:"space-y-3",children:g.map((e,t)=>(0,s.jsxs)("div",{onClick:()=>C(e.id),className:`
                        p-4 rounded-lg border cursor-pointer transition-all
                        ${N===e.id?"border-[#7A9E8E] ring-2 ring-[#7A9E8E]/20":"border-gray-200 hover:border-gray-300"}
                      `,children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:c[e.type]}),s.jsx("span",{className:"text-sm font-medium text-gray-600",children:p[e.type]})]}),(0,s.jsxs)("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:t=>{t.stopPropagation(),w(e.id,"up")},disabled:0===t,className:"p-1 text-gray-400 hover:text-gray-600 disabled:opacity-30",children:"↑"}),s.jsx("button",{onClick:t=>{t.stopPropagation(),w(e.id,"down")},disabled:t===g.length-1,className:"p-1 text-gray-400 hover:text-gray-600 disabled:opacity-30",children:"↓"}),s.jsx("button",{onClick:t=>{t.stopPropagation(),I(e.id)},className:"p-1 text-red-400 hover:text-red-600",children:"✕"})]})]}),(0,s.jsxs)("div",{className:"text-sm text-gray-700",children:["text"===e.type&&s.jsx("p",{className:"line-clamp-2",children:e.data.text||"Pr\xe1zdn\xfd text..."}),"heading"===e.type&&s.jsx("p",{className:"font-bold",children:e.data.text||"Nadpis..."}),"professor"===e.type&&(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx(i.Ct,{variant:"info",children:e.data.professorId}),s.jsx("span",{className:"truncate",children:e.data.text||"Zpr\xe1va profesora..."})]}),"tip"===e.type&&(0,s.jsxs)("p",{className:"text-amber-700",children:["\uD83D\uDCA1 ",e.data.text||"Tip..."]}),"practice"===e.type&&(0,s.jsxs)("p",{className:"text-green-700",children:["\uD83C\uDFAF ",e.data.text||"Cvičen\xed..."]}),"term"===e.type&&(0,s.jsxs)("p",{children:[s.jsx("strong",{children:e.data.term||"Term\xedn"}),": ",e.data.definition||"Definice..."]}),"image"===e.type&&(0,s.jsxs)("p",{className:"text-gray-500",children:["\uD83D\uDDBC️ ",e.data.alt||"Obr\xe1zek"]})]})]},e.id))})})]}),(0,s.jsxs)("div",{className:"lg:col-span-1 space-y-4",children:[s.jsx(i.Zb,{title:"Přidat blok",children:s.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.keys(p).map(e=>(0,s.jsxs)("button",{onClick:()=>k(e),className:"flex flex-col items-center gap-1 p-3 rounded-lg bg-gray-50 hover:bg-gray-100 transition-colors",children:[s.jsx("span",{className:"text-xl",children:c[e]}),s.jsx("span",{className:"text-xs text-gray-600",children:p[e]})]},e))})}),N&&s.jsx(i.Zb,{title:"Upravit blok",children:(()=>{let e=g.find(e=>e.id===N);return e?(0,s.jsxs)("div",{className:"space-y-3",children:[("text"===e.type||"tip"===e.type||"practice"===e.type)&&s.jsx(i.gx,{label:"Text",value:e.data.text,onChange:t=>D(e.id,{text:t.target.value}),rows:4}),"heading"===e.type&&(0,s.jsxs)(s.Fragment,{children:[s.jsx(i.II,{label:"Text nadpisu",value:e.data.text,onChange:t=>D(e.id,{text:t.target.value})}),s.jsx(i.Ph,{label:"\xdaroveň",value:String(e.data.level||2),onChange:t=>D(e.id,{level:parseInt(t.target.value)}),options:[{value:"2",label:"H2 - Hlavn\xed"},{value:"3",label:"H3 - Podnadpis"},{value:"4",label:"H4 - Menš\xed"}]})]}),"professor"===e.type&&(0,s.jsxs)(s.Fragment,{children:[s.jsx(i.Ph,{label:"Profesor",value:e.data.professorId,onChange:t=>D(e.id,{professorId:t.target.value}),options:d.Uh.map(e=>({value:e.id,label:e.name}))}),s.jsx(i.gx,{label:"Zpr\xe1va",value:e.data.text,onChange:t=>D(e.id,{text:t.target.value}),rows:4}),s.jsx(i.Ph,{label:"Varianta",value:e.data.variant||"default",onChange:t=>D(e.id,{variant:t.target.value}),options:[{value:"default",label:"V\xfdchoz\xed"},{value:"tip",label:"Tip"},{value:"question",label:"Ot\xe1zka"}]})]}),"term"===e.type&&(0,s.jsxs)(s.Fragment,{children:[s.jsx(i.II,{label:"Term\xedn",value:e.data.term,onChange:t=>D(e.id,{term:t.target.value})}),s.jsx(i.II,{label:"Latinsky",value:e.data.latin||"",onChange:t=>D(e.id,{latin:t.target.value})}),s.jsx(i.gx,{label:"Definice",value:e.data.definition,onChange:t=>D(e.id,{definition:t.target.value}),rows:3})]}),"image"===e.type&&(0,s.jsxs)(s.Fragment,{children:[s.jsx(i.II,{label:"URL obr\xe1zku",value:e.data.url,onChange:t=>D(e.id,{url:t.target.value}),placeholder:"https://..."}),s.jsx(i.II,{label:"Alt text",value:e.data.alt,onChange:t=>D(e.id,{alt:t.target.value})}),s.jsx(i.II,{label:"Popisek",value:e.data.caption||"",onChange:t=>D(e.id,{caption:t.target.value})})]})]}):null})()}),N&&s.jsx(i.Zb,{title:"N\xe1hled",children:(()=>{let e=g.find(e=>e.id===N);return e?"professor"===e.type&&e.data.text?s.jsx(o.jz,{professorId:e.data.professorId,variant:e.data.variant||"default",children:e.data.text}):s.jsx("div",{className:"p-3 bg-gray-50 rounded-lg text-sm",children:e.data.text||e.data.term||"Pr\xe1zdn\xfd blok"}):null})()})]})]}),"terms"===y&&s.jsx(i.Zb,{title:"Kl\xedčov\xe9 term\xedny",subtitle:"Term\xedny zobrazen\xe9 na konci lekce",actions:s.jsx(i.zx,{size:"sm",onClick:z,children:"+ Přidat term\xedn"}),children:0===j.length?(0,s.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[s.jsx("p",{className:"mb-4",children:"Zat\xedm ž\xe1dn\xe9 term\xedny"}),s.jsx(i.zx,{onClick:z,children:"Přidat prvn\xed term\xedn"})]}):s.jsx("div",{className:"space-y-4",children:j.map((e,t)=>(0,s.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,s.jsxs)("span",{className:"text-sm font-medium text-gray-500",children:["#",t+1]}),s.jsx("button",{onClick:()=>E(e.id),className:"text-red-400 hover:text-red-600",children:"✕"})]}),(0,s.jsxs)("div",{className:"grid sm:grid-cols-2 gap-3",children:[s.jsx(i.II,{label:"Term\xedn",value:e.term,onChange:t=>_(e.id,"term",t.target.value),placeholder:"Sagit\xe1ln\xed rovina"}),s.jsx(i.II,{label:"Latinsky",value:e.latin,onChange:t=>_(e.id,"latin",t.target.value),placeholder:"Planum sagittale"})]}),s.jsx("div",{className:"mt-3",children:s.jsx(i.gx,{label:"Definice",value:e.definition,onChange:t=>_(e.id,"definition",t.target.value),rows:2,placeholder:"Rovina proch\xe1zej\xedc\xed tělem zepředu dozadu..."})}),s.jsx("div",{className:"mt-3",children:s.jsx(i.II,{label:"Tip (voliteln\xe9)",value:e.tip,onChange:t=>_(e.id,"tip",t.target.value),placeholder:"Pamatuj si: sagit\xe1ln\xed = jako š\xedp..."})})]},e.id))})}),"settings"===y&&s.jsx(i.Zb,{title:"Nastaven\xed lekce",children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid sm:grid-cols-2 gap-4",children:[s.jsx(i.II,{label:"XP odměna",type:"number",value:m.xp_reward,onChange:e=>h({...m,xp_reward:parseInt(e.target.value)||0})}),s.jsx(i.II,{label:"Odhadovan\xfd čas (min)",type:"number",value:m.estimated_minutes,onChange:e=>h({...m,estimated_minutes:parseInt(e.target.value)||0})})]}),s.jsx(i.gx,{label:"Praktick\xe9 cvičen\xed",value:m.practice,onChange:e=>h({...m,practice:e.target.value}),rows:3,placeholder:"\xdakol pro studenta..."}),s.jsx(i.gx,{label:"Tip na z\xe1věr",value:m.tip,onChange:e=>h({...m,tip:e.target.value}),rows:2,placeholder:"Užitečn\xfd tip..."}),s.jsx("div",{className:"pt-4 border-t",children:(0,s.jsxs)("label",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg cursor-pointer",children:[(0,s.jsxs)("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:"Publikovat lekci"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Lekce bude viditeln\xe1 pro studenty"})]}),s.jsx("input",{type:"checkbox",checked:m.is_published,onChange:e=>h({...m,is_published:e.target.checked}),className:"w-5 h-5 rounded border-gray-300 text-[#7A9E8E] focus:ring-[#7A9E8E]"})]})})]})})]})}},32:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});let s=(0,a(8570).createProxy)(String.raw`/Users/ondrej/Documents/moje-weby/lymfaflow/app/admin/lessons/[id]/page.tsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[276,471,434,553,536,515,899],()=>a(3471));module.exports=s})();